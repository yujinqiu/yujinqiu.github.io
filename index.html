

<!DOCTYPE html>
<html>
<head>
    
    <meta charset="utf-8">
    <base href="http://yujinqiu.github.io">
    <title>Engineer&#39;s Draft</title>
    <link rel="canonical" href="http://yujinqiu.github.io/">
    <link href="http://yujinqiu.github.io/index.xml/" rel="alternate" type="application/rss+xml" title="Engineer&#39;s Draft" />

    

<link rel="stylesheet" href="/css/poole.css">

<link rel="stylesheet" href="/css/lanyon.css">

</head>
  <body class="theme-base-0b" lang="en">

  


<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">

  <nav class="sidebar-nav">
    <p><img src="img/logo.png" width="80"></p>
    <a class="sidebar-nav-item" href="/">Home</a>

    <a class="sidebar-nav-item" href="/posts">Blog</a>

    <a class="sidebar-nav-item" href="https://github.com/yujinqiu">Github</a>
  </nav>

  <div class="sidebar-item">
    <p>
      Powered by <a href="http://hugo.spf13.com">Hugo</a>. Design reused from <a href="https://github.com/spencerlyon2">Spencer Lyon</a> which was modified from this Jekyl theme <a href="http://lanyon.getpoole.com">Lanyon</a> under this <a href="https://github.com/spencerlyon2/hugo_gh_blog/blob/master/LICENSE">licence</a>.
    </p>
  </div>
</div>




  
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="engineer's draft">Engineer's Draft</a>
          </h3>
          <hr>
        </div>
      </div>

      <div class="container content">

        
        <h1 class="post-title">Top10 Posts</h1>
        <section id="main">
          <ul id="list">
            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/FPMDraft/'> FPMDraft</a> </h2>
      <div class="meta">Wed, Jan 21, 2015</div>
    </header>

    FPM FPM 入门 fpm -s &lt;source type&gt; -t &lt;target type&gt; [options] source types: &quot;dir&quot; 可以是文件或者是目录 常见问题和解决思路 Process failed: rpmbuild failed (exit code 1). 解决思路: fpm 运行增加 --verbose 选项, 查看日志输出 如何把我的一个程序, 比如 jq 打包为 RPM 格式文件, 期望安装之后安装 到 /bin 目录下 fpm -s dir -t rpm -n jq -v 1.4.0 --prefix=/bin/ jq http://golang-basic.blogspot.jp/2014/10/dynamic-programming-problem-maximum.html
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/FPMDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/JqueryDraft/'> JqueryDraft</a> </h2>
      <div class="meta">Sun, Jan 11, 2015</div>
    </header>

    <h2>Jsonp</h2>

<p>Unexpected token colon JSON after jQuery.ajax#get</p>

<h3>背景</h3>

<p>FE 同学由于联调环境原因, 通常希望在本地调用服务端的接口, 为了解决跨域问题, 通常会使用<code>jsonp</code>, 然后今天突然反馈说和其他 RD 联调的时候发现console log 报错:</p>

<pre><code>Unexpected token :
</code></pre>

<h4>追查</h4>

<p>开始怀疑是返回的 json 格式有问题, 利用 json 工具校验之后, 排除了这种可能性. 后面突然想到问题可能出现在 server 端,  联系相关的 RD, 看了代码之后, 发现没有提供对应的 jsonp 接口.  don&rsquo;t argue, just show me the code</p>

<h4>原因</h4>

<p>To support <a href="http://json-p.org/">JSONP request</a>, the server will have to include the <code>P</code>, or <code>Padding</code>, in the response.<br />
Server return</p>

<pre><code>{&quot;Name&quot;:&quot;Tome&quot;, &quot;Description&quot;: &quot;Hello it's me!&quot;}
</code></pre>

<p>but it should be</p>

<pre><code>jQuery111108398571682628244_1403193212453({&quot;Name&quot;:&quot;Tom&quot;,&quot;Description&quot;:&quot;Hello it's me!&quot;})
</code></pre>

<p>The syntax err, <code>&quot;Unexpected token :&quot;</code>, is because <strong>JSONP is parsed as JavaScript</strong>, where  <code>{...}</code> also represents <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block">blocks</a>.<br />
blocks syntax should be:</p>

<pre><code>{
    statement_1;
    statement_2;
    ...
    statement_n;
}
</code></pre>

<p>so we get <code>Unexpected token :</code> error</p>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/JqueryDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/AndroidDraft/'> AndroidDraft</a> </h2>
      <div class="meta">Sat, Jan 3, 2015</div>
    </header>

    <h2>创建 Android Virtual Device(AVD)</h2>

<pre><code>android list  targets 查看已经下载好的 sdks
</code></pre>

<h2>查看</h2>

<pre><code>adb devices 能够查看配置好的 android 物理设备
➜  bin git:(master) ✗ adb devices
List of devices attached
MX21CA1ALJZM4D2227  device
</code></pre>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/AndroidDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/MetaDraft/'> MetaDraft</a> </h2>
      <div class="meta">Fri, Jan 2, 2015</div>
    </header>

    如何高效学习 该内容为翻译内容, 源地址 我相信学校里的优等生和差生的差距是由于学习习惯导致. 坦诚的说大多数学生非常低效地学习. 更糟糕的是, 大多数老师无法传授给学生高效的学习习惯. 学习和努力成比例 坐在教室里边听着教授演讲感觉在学习&hellip;翻看一本书的一个新的话题感觉在读书&hellip;但是这些行为是复杂的被动式活动, 是低效的. 这些行为可能会导致更糟糕的结果, 它们会给你造成你已经学会了的假象. 你可以在教室里边听关于量子力学的演讲, 在一定程度上你熟悉这个话题的和一些术语. 可悲的是你在欺骗你自己你已经学会, 这比什么都不会还要糟糕. 相反, 你应该给自己寻找挑战. 如果某些内容你觉得简单, 那么
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/MetaDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/FqDraft/'> fq</a> </h2>
      <div class="meta">Sun, Dec 28, 2014</div>
    </header>

    <h2>FQ</h2>

<blockquote>
<p>Across the Great Wall we can reach every corner of the world.</p>
</blockquote>

<h3>shadowsocks (ss)</h3>

<h4>原理</h4>

<pre><code>app &lt;- 本地 client 解密 &lt;- 墙外 vps(加密) &lt;- 目标 site  
</code></pre>

<p>本质上 sshd -D 就是一个 Shadowsocks .</p>

<pre><code>ssh -D 0.0.0.0:10086 user@vps
</code></pre>

<h4>注意事项</h4>

<ol>
<li>
ssh -D 的本质上是一个 sock5 的代理, 不是 http/https 代理, 所以在 firefox 配置里边<strong>不能</strong>够把 HTTP Proxy 和 SSL Proxy 配置为<code>127.0.0.1:10086</code>, 只能设置socks 代理</li>
<li>为了避免 <a href="http://en.wikipedia.org/wiki/DNS_spoofing">DNS 污染</a>, 建议在 firefox 中设置<code>Remote DNS</code>, 进行远端解析</li>
</ol>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/FqDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/BeegoDraft/'> BeegoDraft</a> </h2>
      <div class="meta">Sat, Dec 27, 2014</div>
    </header>

    <h2>beego session 失效时间</h2>

<h3>背景</h3>

<p>使用 beego 进行开发过程中为了减少大家登陆时间特定设置1个月有效期, 结果发现需要经常登陆</p>

<h3>原因</h3>

<p>session 的过期失效时间由两个方面决定</p>

<ol>
<li>存储sessionid 的 cookie (SessionCookieLifetime)</li>
<li>存储在服务器端的 session 文件( SessionGCMaxLifetime 默认3600)</li>
</ol>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/BeegoDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/CurlDraft/'> CurlDraft</a> </h2>
      <div class="meta">Thu, Dec 25, 2014</div>
    </header>

    <h2>CURL 有用操作</h2>

<h3>curl post 数据</h3>

<ol>
<li><p>提交 key:value 格式数据</p>

<pre><code>curl -d 'username=xyz&amp;password=xyz' http://localhost:3000/api/login
</code></pre></li>

<li><p>提交 json格式数据</p>

<pre><code>curl -d '{&quot;username&quot;:&quot;xyz&quot;,&quot;password&quot;:&quot;xyz&quot;}' http://localhost:3000/api/login
</code></pre></li>

<li><p>参数内容较多,直接写入到一个文件中</p>

<pre><code>curl -d @param.json  http://localhost:3000/api/login
</code></pre></li>

<li><p>上传附件</p>

<pre><code>curl -F &quot;blob=@card.txt;type=text/plain&quot; http://localhost:3000/upload
</code></pre></li>
</ol>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/CurlDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/GolangDraft/'> GolangDraft</a> </h2>
      <div class="meta">Fri, Dec 12, 2014</div>
    </header>

    <h2>Golang 相关 tools 安装</h2>

<h3>背景</h3>

<p>在学习 golang 过程中, 看到 Rob Pike 大神的 <a href="https://talks.golang.org/2012/waza.slide#19">slide</a> , 感觉炫酷.  安装过程如下:</p>

<pre><code>go get golang.org/x/tools/cmd/present
</code></pre>

<p><strong>注意</strong> 如果期望手工 build, 进入目录:  <code>go/src/golang.org/x/tools/cmd/present</code>  不要搞错.</p>

<h2>输出前缀为0的数字</h2>

<h3>背景</h3>

<p>在运维过程中为了管理大量的机器, 通常会对机器进行编号, 比如 <code>web001.$idc</code> <code>web0002.$idc</code>,
在 golang 中的解决方案:</p>

<pre><code>fmt.Printf(&quot;%03d&quot;, seq)
</code></pre>

<p>说明:<br />
%3d 表示输出数字的宽度至少为 3<br />
0   填充前导的0而非空格；对于数字，这会将填充移到正负号之后</p>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/GolangDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/NmapHack/'> Nmap Draft</a> </h2>
      <div class="meta">Thu, Dec 4, 2014</div>
    </header>

    <p>#nmap 简单介绍</p>

<p>本文的切入点:hacker使用Nmap的流程角度来介绍如何掌握Nmap这个强大的工具,帮助安全管理员发现自己网站的漏洞, 并逐步加固自己的安全.</p>

<p>nmap(network mapper) 主要用途<br />
- 网络发现<br />
- 安全扫描
- 端口扫描
- 网络审查</p>

<h3>nmap 命令选项</h3>

<pre><code>nmap [-s (Scan Type)] [Options] {target specification}
</code></pre>

<h2>Let&rsquo;s start hack</h2>

<h3>确定网络的主机</h3>

<p>hacker使用Nmap来扫描整个网络。</p>

<pre><code>nmap -sP 192.168.1.0/24  
</code></pre>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/NmapHack/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/MysqlDraft/'> MysqlDraft</a> </h2>
      <div class="meta">Thu, Dec 4, 2014</div>
    </header>

    <h2>Mysql多列去重</h2>

<h3>背景</h3>

<p>在项目中通常需要我们对数据进行去重, 第一反应应该是使用<code>distinct</code> 来进行去重, 假设数据如下</p>

<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>monalisa</td>
<td>100</td>
</tr>

<tr>
<td>2</td>
<td>foo</td>
<td>100</td>
</tr>

<tr>
<td>3</td>
<td>monalisa</td>
<td>26</td>
</tr>

<tr>
<td>4</td>
<td>foo</td>
<td>100</td>
</tr>

<tr>
<td>5</td>
<td>bar</td>
<td>100</td>
</tr>

<tr>
<td>6</td>
<td>test</td>
<td>100</td>
</tr>

<tr>
<td>7</td>
<td>demo</td>
<td>100</td>
</tr>
</tbody>
</table>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/MysqlDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
          </ul>
        </section>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>



<div class="container content">
<footer>
</footer>
</div>

</body>
</html>

