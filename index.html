

<!DOCTYPE html>
<html>
<head>
    
    <meta charset="utf-8">
    <base href="http://yujinqiu.github.io">
    <title>Engineer&#39;s Draft</title>
    <link rel="canonical" href="http://yujinqiu.github.io/">
    <link href="http://yujinqiu.github.io/index.xml/" rel="alternate" type="application/rss+xml" title="Engineer&#39;s Draft" />

    

<link rel="stylesheet" href="/css/poole.css">

<link rel="stylesheet" href="/css/lanyon.css">

</head>
  <body class="theme-base-0b" lang="en">

  


<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">

  <nav class="sidebar-nav">
    <p><img src="img/logo.png" width="80"></p>
    <a class="sidebar-nav-item" href="/">Home</a>

    <a class="sidebar-nav-item" href="/posts">Blog</a>

    <a class="sidebar-nav-item" href="https://github.com/yujinqiu">Github</a>
  </nav>

  <div class="sidebar-item">
    <p>
      Powered by <a href="http://hugo.spf13.com">Hugo</a>. Design reused from <a href="https://github.com/spencerlyon2">Spencer Lyon</a> which was modified from this Jekyl theme <a href="http://lanyon.getpoole.com">Lanyon</a> under this <a href="https://github.com/spencerlyon2/hugo_gh_blog/blob/master/LICENSE">licence</a>.
    </p>
  </div>
</div>




  
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="engineer's draft">Engineer's Draft</a>
          </h3>
          <hr>
        </div>
      </div>

      <div class="container content">

        
        <h1 class="post-title">Top10 Posts</h1>
        <section id="main">
          <ul id="list">
            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/AndroidDraft/'> AndroidDraft</a> </h2>
      <div class="meta">Sat, Jan 3, 2015</div>
    </header>

    创建 Android Virtual Device(AVD) android list targets 查看已经下载好的 sdks 查看 adb devices 能够查看配置好的 android 物理设备 ➜ bin git:(master) ✗ adb devices List of devices attached MX21CA1ALJZM4D2227 device 破解 Android 程序通常方法是将apk 文件利用 ApkTool反编译, 生成 Smali 格式的反汇编代码, 然后阅读 Smali 文件的代码来理解程序的运行机制, 找到突破口进行修改, 最后利用 ApkTool 重新编译生成apk 文件, 并签名, 最后进行测试 apktool 安装 注意点 mac os x 利用 brew 安装之后,建议确认 apktool 的版本,使用2.0.0 以上版本, 1.5.2 版本个人测试存在问题. mac os x 安装 Mac OS X: Download Mac wrapper script (Right click, Save Link As apktool) Download apktool-2 (find newest here) Rename downloaded jar to apktool.jar Move both files (apktool.jar &amp; apktool) to /usr/local/bin (root needed) Make sure both files are executable (chmod +x) Try running apktool via cli Note - Wrapper scripts are not needed, but helpful so you don&rsquo;t have to type java -jar apktool.jar over and over.
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/AndroidDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/MetaDraft/'> MetaDraft</a> </h2>
      <div class="meta">Fri, Jan 2, 2015</div>
    </header>

    如何高效学习 该内容为翻译内容, 源地址 我相信学校里的优等生和差生的差距是由于学习习惯导致. 坦诚的说大多数学生非常低效地学习. 更糟糕的是, 大多数老师无法传授给学生高效的学习习惯. 学习和努力成比例 坐在教室里边听着教授演讲感觉在学习&hellip;翻看一本书的一个新的话题感觉在读书&hellip;但是这些行为是复杂的被动式活动, 是低效的. 这些行为可能会导致更糟糕的结果, 它们会给你造成你已经学会了的假象. 你可以在教室里边听关于量子力学的演讲, 在一定程度上你熟悉这个话题的和一些术语. 可悲的是你在欺骗你自己你已经学会, 这比什么都不会还要糟糕. 相反, 你应该给自己寻找挑战. 如果某些内容你觉得简单, 那么
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/MetaDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/FqDraft/'> fq</a> </h2>
      <div class="meta">Sun, Dec 28, 2014</div>
    </header>

    FQ Across the Great Wall we can reach every corner of the world. shadowsocks (ss) 原理 app &lt;- 本地 client 解密 &lt;- 墙外 vps(加密) &lt;- 目标 site 本质上 sshd -D 就是一个 Shadowsocks . ssh -D 0.0.0.0:10086 user@vps 注意事项 ssh -D 的本质上是一个 sock5 的代理, 不是 http/https 代理, 所以在 firefox 配置里边不能够把 HTTP Proxy 和 SSL Proxy 配置为127.0.0.1:10086, 只能设置socks 代理 为了避免 DNS 污染, 建议在 firefox 中设置Remote DNS, 进行远端解析 相关命令代理 curl --socks5-hostname &lt;host[:port]&gt; Use the specified SOCKS5 proxy (and let the proxy resolve the hostname) 避免 DNS 污染 --socks5 &lt;host[:port]&gt; Use the specified SOCKS proxy - but resolve the hostname locally.
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/FqDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/BeegoDraft/'> BeegoDraft</a> </h2>
      <div class="meta">Sat, Dec 27, 2014</div>
    </header>

    beego session 失效时间 背景 使用 beego 进行开发过程中为了减少大家登陆时间特定设置1个月有效期, 结果发现需要经常登陆 原因 session 的过期失效时间由两个方面决定 存储sessionid 的 cookie (SessionCookieLifetime) 存储在服务器端的 session 文件( SessionGCMaxLifetime 默认3600) 开始的时候只是设置了 SessionCookieLifetime, 虽然 cookie 的内容不会被删除, 但是在服务器端的 session 文件会被删除, 在代码中 ctx.Inut.Session(&quot;username&quot;).(string) 无法获取对应的内容, 重定向到登陆页面.
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/BeegoDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/CurlDraft/'> CurlDraft</a> </h2>
      <div class="meta">Thu, Dec 25, 2014</div>
    </header>

    <h2>CURL 有用操作</h2>

<h3>curl post 数据</h3>

<ol>
<li><p>提交 key:value 格式数据</p>

<pre><code>curl -d 'username=xyz&amp;password=xyz' http://localhost:3000/api/login
</code></pre></li>

<li><p>提交 json格式数据</p>

<pre><code>curl -d '{&quot;username&quot;:&quot;xyz&quot;,&quot;password&quot;:&quot;xyz&quot;}' http://localhost:3000/api/login
</code></pre></li>

<li><p>参数内容较多,直接写入到一个文件中</p>

<pre><code>curl -d @param.json  http://localhost:3000/api/login
</code></pre></li>

<li><p>上传附件</p>

<pre><code>curl -F &quot;blob=@card.txt;type=text/plain&quot; http://localhost:3000/upload
</code></pre></li>
</ol>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/CurlDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/GolangDraft/'> GolangDraft</a> </h2>
      <div class="meta">Fri, Dec 12, 2014</div>
    </header>

    Golang 相关 tools 安装 背景 在学习 golang 过程中, 看到 Rob Pike 大神的 slide , 感觉炫酷. 安装过程如下: go get golang.org/x/tools/cmd/present 注意 如果期望手工 build, 进入目录: go/src/golang.org/x/tools/cmd/present 不要搞错.
    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/GolangDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/NmapHack/'> Nmap Draft</a> </h2>
      <div class="meta">Thu, Dec 4, 2014</div>
    </header>

    <p>#nmap 简单介绍</p>

<p>本文的切入点:hacker使用Nmap的流程角度来介绍如何掌握Nmap这个强大的工具,帮助安全管理员发现自己网站的漏洞, 并逐步加固自己的安全.</p>

<p>nmap(network mapper) 主要用途<br />
- 网络发现<br />
- 安全扫描
- 端口扫描
- 网络审查</p>

<h3>nmap 命令选项</h3>

<pre><code>nmap [-s (Scan Type)] [Options] {target specification}
</code></pre>

<h2>Let&rsquo;s start hack</h2>

<h3>确定网络的主机</h3>

<p>hacker使用Nmap来扫描整个网络。</p>

<pre><code>nmap -sP 192.168.1.0/24  
</code></pre>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/NmapHack/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/MysqlDraft/'> MysqlDraft</a> </h2>
      <div class="meta">Thu, Dec 4, 2014</div>
    </header>

    <h2>Mysql多列去重</h2>

<h3>背景</h3>

<p>在项目中通常需要我们对数据进行去重, 第一反应应该是使用<code>distinct</code> 来进行去重, 假设数据如下</p>

<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>monalisa</td>
<td>100</td>
</tr>

<tr>
<td>2</td>
<td>foo</td>
<td>100</td>
</tr>

<tr>
<td>3</td>
<td>monalisa</td>
<td>26</td>
</tr>

<tr>
<td>4</td>
<td>foo</td>
<td>100</td>
</tr>

<tr>
<td>5</td>
<td>bar</td>
<td>100</td>
</tr>

<tr>
<td>6</td>
<td>test</td>
<td>100</td>
</tr>

<tr>
<td>7</td>
<td>demo</td>
<td>100</td>
</tr>
</tbody>
</table>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/MysqlDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/GitDraft/'> Git Draft</a> </h2>
      <div class="meta">Tue, Nov 25, 2014</div>
    </header>

    <h1>Git</h1>

<h2>原子提交</h2>

<p>在我们修改文件的时候, 通常是希望一次提交只包含该次功能修改相关的操作.<br />
但是如果一个文件包含多个操作该怎么办 ?<br />
或者你的一个程序文件里边,为了调试写了很多的log日志输出, 你不希望这些语句ci 到server上, 该怎么办 ?</p>

<p><code>git add -p</code> 能够解决上面的场景(虽然已经add 过,还是需要add 到 stage 进去).<br />
执行之后会提示:</p>

<pre><code>Stage this hunk [y,n,q,a,d,/,e,?]?
</code></pre>

<p>hit <code>s</code> to split whatever change into smaller chunks. This only works if there is at least one unchanged line in the &ldquo;middle&rdquo; of the hunk, which is where hunk will be split<br />
then hit <code>y</code> to stage that chunk<br />
or <code>n</code> to not stage that hunk<br />
or <code>e</code> to manually edit the chunk (useful when git can&rsquo;t split it automatically)<br />
and <code>d</code> to exit or go to the next file.<br />
Use <code>?</code> to get the whole list of available options.</p>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/GitDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
            

<article class="post">
    <header>
      <h2><a href='http://yujinqiu.github.io/posts/ParallelDraft/'> CliDraft</a> </h2>
      <div class="meta">Tue, Nov 25, 2014</div>
    </header>

    <h1>Parallel(并行你的工作2)</h1>

<p>今天看到看到一篇介绍Parallel 的文章<a href="http://www.rankfocus.com/use-cpu-cores-linux-commands/">Use multiple CPU Cores with your Linux commands — awk, sed, bzip2, grep, wc, etc.</a>, 感觉和实际工作的没有太大的帮助, 因为平时其实很少去压缩和解压缩超大的文件. 因此下面主要结合个人的工作经验,总结几条Parallel的工作.
下面看一下Parallel的图片,感觉有点眼花,很有心理学的图片效果, 相信我Parallel 是一个值得你学习的命令, 所谓事半功倍说的就是它.</p>

<p><img src="http://www.gnu.org/software/parallel/logo-gray+black300.png" alt="" />
</p>

<h2>典型场景1</h2>

<p>在日常运维工作中,为了管理大量的机器(1k,1w台机器)我们通常搭建一台中心控制机器, 该机器和线上所有的机器有<a href="http://todo">信任关系</a>, 因此常见的工作就是在中心控制机器上顺序登录各台机器执行命令. 举一个简单的例子, 获取机器的启动时间 <code>uptime</code> . 考虑到机器的规模,假设是1万台, 我们基本上跑一下要消耗3-5min.</p>

<p>为了解决上面的问题,我曾经学习了一下 <code>xargs</code> 命令, 已经能够基本上满足我的要求. 假设机器的列表在 machines 文件内, 那么通过以下命令</p>

<p><code>cat machines | xargs -i ssh {} &quot; uptime &quot;</code></p>

<p>上面的命令是逐台机器执行, 好处就是可以省略在bash 里边输入各种 for 循环. 上面的效果和下面的命令一致
&gt;
for host in $( &lt; machines ) ; do ssh ${host} &ldquo; uptime &rdquo; ;done</p>

<p>如果需要并行执行应该怎么搞? 答案很简单翻一下 xargs 的man 手册你会发现有一个<code>-P</code> 选项, 表示并发度
<code>-P 0</code> 表示全部并发.  -P 10 表示10台并发 (<strong>在运维工程中通常需要考虑控制并发度,特别是在日志下载的时候,因为进程会出现宽度被打满的case,要特别注意</strong>)
因此</p>

<p><code>cat machines | xargs -i -P 0 ssh {} &quot; uptime &quot;</code></p>

<p>就能实现全部并发. 上面的命令你执行之后会发现由于是并行执行, 因此输出基本上是乱序的. 如果某一台机器执行错误,那么基本上很难定位到是哪台.  所以个人认为 xargs 在进行简单的并行,比如批量重启服务,分发大量小文件还是蛮不错的. 我最常用的命令组合是,来实现快速的文件分发</p>

    <footer style="text-align:right; ">
        <a href='http://yujinqiu.github.io/posts/ParallelDraft/'><nobr>Read more →</nobr></a>
    </footer>
    <hr/>
</article>

            
          </ul>
        </section>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>



<div class="container content">
<footer>
</footer>
</div>

</body>
</html>

